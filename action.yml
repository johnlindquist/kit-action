name: "Script Kit Action"
description: "Uses @johnlindquist/kit to run a script"
author: "John Lindquist"
inputs:
  script:
    required: true
    description: "name of a script in your ./scripts dir"
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v2
    - run: |
        ls .
        parent_dir=$(dirname -- "$(realpath -- ".")")
        echo "PARENT DIR: $parent_dir"
        node_dir="$parent_dir/node"
        mkdir $node_dir
        echo "NODE DIR: $node_dir"
        ./install-node.sh --prefix $node_dir

        kit_node="$node_dir/bin/node"
        kit_npm="$node_dir/bin/npm"

        $kit_npm i --prefix $parent_dir @johnlindquist/kit@alpha
        ls "$parent_dir/*/*"

        # export KIT_NODE=${{ env.kit_node }} "$parent_dir/node_modules/@johnlindquist/kit/bin/k" ${{ inputs.script }}
      shell: bash
